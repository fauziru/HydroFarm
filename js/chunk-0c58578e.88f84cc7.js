(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c58578e"],{1511:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex flex-column flex-grow-1"},[a("router-view"),a("div",{staticClass:"col-xl-4 col-12",style:e.isMobile?"padding: 0px!important;":""},[a("div",{staticClass:"d-flex align-center py-3"},[a("div",{staticClass:"display-1"},[e._v(" User ")]),a("v-spacer")],1),a("v-data-table",{staticClass:"elevation-1 rounded-xl",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{rounded:"xl",flat:""}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Cari ..","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-btn",{attrs:{icon:"",depressed:""},on:{click:e.initialize}},[a("v-icon",[e._v("mdi-reload")])],1)],1)]},proxy:!0},{key:"item.id",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{"z-index":"99",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,s=t.attrs;return[a("span",e._g(e._b({staticClass:"caption"},"span",s,!1),r),[e._v(" "+e._s(e._f("truncate")("#"+n.id,15,"..."))+" ")])]}}],null,!0)},[a("span",[e._v(" "+e._s(n.id)+" ")])])]}},{key:"item.img_path",fn:function(t){var n=t.item;return[a("v-avatar",{staticClass:"border",style:{marginBlock:"4px"},attrs:{color:"primary",size:"60"}},[a("v-img",{attrs:{src:e.srcImage(n.img_path,n.name),alt:"Avatar User"}})],1)]}},{key:"item.email_address",fn:function(e){var t=e.item;return[a("m-copied-label",{attrs:{text:t.email_address}})]}},{key:"item.is_online",fn:function(t){var n=t.item;return[a("v-chip",{attrs:{color:n.is_online?"green":"red",dark:""}},[e._v(" "+e._s(n.is_online?"online":"offline")+" ")])]}},e.isMe?{key:"item.actions",fn:function(t){var n=t.item;return["admin"!==n.role?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",depressed:"",link:""},on:{click:function(t){return e.changeToAdmin(n.id)}}},"v-btn",s,!1),r),[a("v-icon",{attrs:{small:""}},[e._v(" mdi-account-plus ")])],1)]}}],null,!0)},[e._v(" Jadikan Admin ")]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",depressed:"",link:""},on:{click:function(t){return e.changeToUser(n.id)}}},"v-btn",s,!1),r),[a("v-icon",{attrs:{small:""}},[e._v(" mdi-account-minus ")])],1)]}}],null,!0)},[e._v(" Hapus Admin ")])]}}:null,{key:"no-data",fn:function(){return[e.loadState?a("Loader"):a("no-data",{attrs:{"reload-callback":e.initialize}})]},proxy:!0}],null,!0)})],1)],1)},r=[],s=a("1da1"),i=a("5530"),o=(a("d81d"),a("96cf"),a("2f62")),c=a("8392"),l=a("7d70"),u=a("1419"),d={components:{Loader:l["a"],"m-copied-label":c["a"],NoData:u["a"]},data:function(){return{search:"",sourceImage:"https://api.hydrofarm.id/storage/images/avatar/",headers:[{text:"#ID",value:"id"},{text:"Avatar",value:"img_path"},{text:"No. Hp",value:"phone_number"},{text:"Email",value:"email_address"},{text:"Nama",align:"start",sortable:!1,value:"name"},{text:"Role",value:"role"},{text:"Status",value:"is_online"},{text:"Terakhir dilihat",value:"last_seen"},{text:"",value:"actions",sortable:!1}],users:[]}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(o["d"])("layout",["isMobile","loadState"])),Object(o["d"])("auth",["email_address"])),{},{isMe:function(){return"fauzirezaumr@gmail.com"===this.email_address}}),created:function(){this.initialize()},mounted:function(){this.realtimeEventListener()},beforeDestroy:function(){this.removeRealtimeEventListener()},methods:Object(i["a"])(Object(i["a"])({},Object(o["c"])("layout",["alertFire"])),{},{initialize:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.users=[],e.loadstate(!0),t.prev=2,t.next=5,e.axios.get("user");case 5:a=t.sent,n=a.data,e.users=n.data,console.log("data user",e.users),e.loadstate(!1),t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](2),e.loadstate(!1),console.log("error store data",t.t0),e.alertFire({type:"error",message:"Terjadi kesalahan pada server!"});case 17:case"end":return t.stop()}}),t,null,[[2,12]])})))()},changeToAdmin:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.loadstate(!0),a.next=4,t.axios.post("user/upgrade-admin/".concat(e));case 4:t.loadstate(!1),t.alertFire({type:"success",message:"Berhasil mengupgrade user menjadi admin!"}),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("error",a.t0),t.loadstate(!1);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()},changeToUser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.loadstate(!0),a.next=4,t.axios.post("user/downgrade-admin/".concat(e));case 4:t.loadstate(!1),t.alertFire({type:"success",message:"Berhasil downgrade user!"}),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log("error",a.t0),t.loadstate(!1);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()},srcImage:function(e,t){return e?this.sourceImage+e:"https://ui-avatars.com/api/?name=".concat(t,"&background=b0d388")},realtimeEventListener:function(){var e=this;window.Echo.private("events").listen("UpdateUserStatus",(function(t){console.log("event update user status",t);var a=t.data;e.users.map((function(e){return e.id===a.id?Object.assign(e,a):e}))}))},removeRealtimeEventListener:function(){window.Echo.private("events").stopListening("UpdateUserStatus")},loadstate:function(e){this.$store.commit("layout/setLoadstate",e)}})},p=d,m=a("2877"),v=a("6544"),f=a.n(v),h=a("8212"),g=a("8336"),b=a("cc20"),_=a("8fea"),x=a("132d"),y=a("adda"),k=a("2fa4"),w=a("8654"),S=a("71d9"),j=a("3a2f"),T=Object(m["a"])(p,n,r,!1,null,null,null);t["default"]=T.exports;f()(T,{VAvatar:h["a"],VBtn:g["a"],VChip:b["a"],VDataTable:_["a"],VIcon:x["a"],VImg:y["a"],VSpacer:k["a"],VTextField:w["a"],VToolbar:S["a"],VTooltip:j["a"]})},8392:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("span",e._g(e._b({attrs:{id:e.text},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.copyToClipboard(t)}}},"span",r,!1),n),[e._v(" "+e._s(e.text)+" ")])]}}])},[a("span",[e._v(e._s(e.copyStatus?"Telah disalin":"Salin"))])])},r=[],s={props:{text:{type:String,default:""}},data:function(){return{copyStatus:!1}},methods:{copyToClipboard:function(){var e=this,t=document.createRange();t.selectNode(document.getElementById(this.text)),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),this.copyStatus=!0,window.getSelection().removeAllRanges(),this.$store.dispatch("layout/alertFire",{type:"success",message:"Teks berhasil disalin!"}),setTimeout((function(){e.copyStatus=!1}),1e3)}}},i=s,o=a("2877"),c=a("6544"),l=a.n(c),u=a("3a2f"),d=Object(o["a"])(i,n,r,!1,null,null,null);t["a"]=d.exports;l()(d,{VTooltip:u["a"]})}}]);