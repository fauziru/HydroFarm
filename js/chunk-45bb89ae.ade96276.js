(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45bb89ae"],{"0ab3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column flex-grow-1"},[a("router-view"),this.$route.params.id?t._e():a("div",{staticClass:"col-xl-4 col-12",style:t.isMobile?"padding: 0px!important;":""},[a("div",{staticClass:"d-flex align-center py-3"},[a("div",{staticClass:"display-1"},[t._v(" Sensor ")]),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{attrs:{disabled:t.loadState}},[a("v-row",[a("v-text-field",{attrs:{outlined:"","error-messages":t.nameErrors,label:"Sensor name"},on:{input:t.$v.editedItem.name_sensor.$touch},model:{value:t.editedItem.name_sensor,callback:function(e){t.$set(t.editedItem,"name_sensor",e)},expression:"editedItem.name_sensor"}})],1),a("v-row",[a("v-text-field",{attrs:{outlined:"","error-messages":t.batasErrors,label:"Batas Maksimal"},on:{input:t.$v.editedItem.batas.max.$touch},model:{value:t.editedItem.batas.max,callback:function(e){t.$set(t.editedItem.batas,"max",e)},expression:"editedItem.batas.max"}})],1),a("v-row",[a("v-text-field",{attrs:{outlined:"","error-messages":t.batasErrors,label:"Batas Minimal"},on:{input:t.$v.editedItem.batas.min.$touch},model:{value:t.editedItem.batas.min,callback:function(e){t.$set(t.editedItem.batas,"min",e)},expression:"editedItem.batas.min"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.loadState},on:{click:function(e){return t.close("editNew")}}},[t._v(" Batalkan ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.loadState},on:{click:t.save}},[t._v(" Simpan ")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1 rounded-xl",attrs:{headers:t.headers,items:t.sensors,search:t.search,"sort-by":"calories"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{rounded:"xl",flat:""}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Cari ..","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-btn",{attrs:{icon:"",depressed:""},on:{click:t.initialize}},[a("v-icon",[t._v("mdi-reload")])],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v(" Ingin menghapus data ini? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.loadState},on:{click:function(e){return t.close("delete")}}},[t._v(" Batalkan ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.loadState},on:{click:t.deleteItemConfirm}},[t._v(" OK ")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.id",fn:function(e){var n=e.item,i=e.index;return[a("v-tooltip",{attrs:{right:"","close-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("span",t._g(t._b({},"span",s,!1),n),[t._v(t._s(i+1))])]}}],null,!0)},[a("m-copiedlabel",{attrs:{text:n.id}})],1)]}},{key:"item.batas",fn:function(e){var a=e.item;return[t._v(" "+t._s("max: "+a.batas.max+", min: "+a.batas.min)+" ")]}},{key:"item.status",fn:function(e){var n=e.item;return[a("v-chip",{attrs:{color:n.status?"green":"red",dark:""}},[t._v(" "+t._s(n.status?"connected":"disconnected")+" ")])]}},"admin"===t.user.role?{key:"item.actions",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{icon:"",depressed:"",link:"",to:n.link}},[a("v-icon",{attrs:{small:""}},[t._v(" mdi-dots-hexagon ")])],1),a("v-btn",{attrs:{icon:"",depressed:""}},[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.editItem(n,"editNew")}}},[t._v(" mdi-pencil ")])],1)]}}:null,{key:"no-data",fn:function(){return[t.loadState?a("Loader"):a("no-data",{attrs:{"reload-callback":t.initialize}})]},proxy:!0}],null,!0)})],1)],1)},i=[],s=a("1da1"),o=a("5530"),r=(a("96cf"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("d3b7"),a("c740"),a("a434"),a("2f62")),l=a("b5ae"),c=a("8392"),d=a("7d70"),u=a("1419"),h={components:{Loader:d["a"],"m-copiedlabel":c["a"],NoData:u["a"]},data:function(){return{search:"",dialog:!1,dialogDelete:!1,headers:[{text:"No.",value:"id"},{text:"Sensor",align:"start",sortable:!1,value:"name_sensor"},{text:"Batas",value:"batas"},{text:"Node",value:"node"},{text:"Status",value:"status"},{text:"Bacaan terakhir",value:"last_read"},{text:"",value:"actions",sortable:!1}],sensors:[],editedIndex:-1,editedItem:{name_sensor:"",batas:{max:0,min:0}},defaultItem:{name_sensor:"",batas:{max:0,min:0}}}},validations:{editedItem:{name_sensor:{required:l["required"]},batas:{max:{required:l["required"],minLength:Object(l["minLength"])(1),maxValue:Object(l["maxValue"])(99999)},min:{required:l["required"],minLength:Object(l["minLength"])(1),maxValue:Object(l["maxValue"])(99999)}}}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(r["d"])("layout",["isMobile","loadState"])),Object(r["d"])("auth",["user"])),{},{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},nameErrors:function(){var t=[];return this.$v.editedItem.name_sensor.$dirty?(!this.$v.editedItem.name_sensor.required&&t.push("nama sensor dibutuhkan!"),t):t},batasErrors:function(){var t=[];return this.$v.editedItem.batas.max.$dirty&&this.$v.editedItem.batas.min.$dirty?(this.$v.editedItem.batas.max.required&&this.$v.editedItem.batas.min.required||t.push("minimal batas dibutuhkan!"),this.$v.editedItem.batas.max.minLength&&this.$v.editedItem.batas.min.minLength||t.push("Batas minimal dan maksimal tidak boleh kosong!"),this.$v.editedItem.batas.max.maxValue&&this.$v.editedItem.batas.min.maxValue||t.push("Nilai minimal dan maksimal tidak bisa lebih dari 9999!"),t):t}}),mqtt:{"events/UpdateSensor":function(t){var e=new TextDecoder("utf-8"),a=new Uint8Array(t),n=JSON.parse(e.decode(a)),i=this.sensors.findIndex((function(t){return t.id===n.id}));-1===i?this.sensors.push(n):this.sensors.splice(i,1,n)}},watch:{dialog:function(t){t||this.close("editNew")},dialogDelete:function(t){t||this.close()}},created:function(){this.initialize()},mounted:function(){this.realtimeEventListener()},methods:Object(o["a"])(Object(o["a"])({},Object(r["c"])("layout",["alertFire"])),{},{initialize:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.sensors=[],t.loadstate(!0),e.prev=2,e.next=5,t.axios.get("sensor");case 5:a=e.sent,n=a.data,t.sensors=n.data,console.log("data sensor",t.sensors),t.loadstate(!1),e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](2),t.loadstate(!1),console.log("error store data",e.t0),t.alertFire({type:"error",message:"Terjadi kesalahan pada server!"});case 17:case"end":return e.stop()}}),e,null,[[2,12]])})))()},editItem:function(t,e){this.editedIndex=this.sensors.indexOf(t),this.editedItem=Object.assign({},t),"editNew"===e?this.dialog=!0:this.dialogDelete=!0},deleteItemConfirm:function(){var t=this;this.loadstate(!0),this.axios.delete("sensor/".concat(this.editedItem.id)).then((function(e){console.log("delete item",e),t.sensors.splice(t.editedIndex,1),t.loadstate(!1),t.close()})).catch((function(e){t.loadstate(!1),console.log("error delete data",e),t.alertFire({type:"error",message:"Terjadi kesalahan pada server!"})}))},close:function(t){var e=this;"editNew"===t?this.dialog=!1:this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1,e.$v.$reset()}))},save:function(){var t=this;this.$v.editedItem.$invalid?this.$store.dispatch("layout/alertFire",{type:"error",message:"Semua kolom harus diisi!"}):(console.log("simpan",this.editedItem),this.loadstate(!0),this.editedIndex>-1&&this.axios.put("sensor/".concat(this.editedItem.id),this.editedItem).then((function(e){t.loadstate(!1),t.close("editNew"),t.$store.dispatch("layout/alertFire",{type:"success",message:"Berhasil menyimpan perubahan!"})})).catch((function(e){console.log("error put data",e),t.alertFire({type:"error",message:"Terjadi kesalahan pada server!"}),t.loadstate(!1)})))},realtimeEventListener:function(){this.$mqtt.subscribe("events/UpdateSensor")},loadstate:function(t){this.$store.commit("layout/setLoadstate",t)}})},m=h,v=a("2877"),f=a("6544"),b=a.n(f),p=a("8336"),g=a("b0af"),x=a("99d9"),y=a("cc20"),k=a("a523"),w=a("8fea"),I=a("169a"),O=a("4bd4"),$=a("132d"),j=a("0fd9"),_=a("2fa4"),C=a("8654"),S=a("71d9"),T=a("3a2f"),A=Object(v["a"])(m,n,i,!1,null,null,null);e["default"]=A.exports;b()(A,{VBtn:p["a"],VCard:g["a"],VCardActions:x["a"],VCardText:x["c"],VCardTitle:x["d"],VChip:y["a"],VContainer:k["a"],VDataTable:w["a"],VDialog:I["a"],VForm:O["a"],VIcon:$["a"],VRow:j["a"],VSpacer:_["a"],VTextField:C["a"],VToolbar:S["a"],VTooltip:T["a"]})},"0fd9":function(t,e,a){"use strict";var n=a("ade3"),i=a("5530"),s=(a("13d5"),a("caad"),a("2532"),a("99af"),a("b64b"),a("5319"),a("ac1f"),a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("4b85"),a("2b0e")),o=a("d9f7"),r=a("80d2"),l=["sm","md","lg","xl"],c=["start","end","center"];function d(t,e){return l.reduce((function(a,n){return a[t+Object(r["G"])(n)]=e(),a}),{})}var u=function(t){return[].concat(c,["baseline","stretch"]).includes(t)},h=d("align",(function(){return{type:String,default:null,validator:u}})),m=function(t){return[].concat(c,["space-between","space-around"]).includes(t)},v=d("justify",(function(){return{type:String,default:null,validator:m}})),f=function(t){return[].concat(c,["space-between","space-around","stretch"]).includes(t)},b=d("alignContent",(function(){return{type:String,default:null,validator:f}})),p={align:Object.keys(h),justify:Object.keys(v),alignContent:Object.keys(b)},g={align:"align",justify:"justify",alignContent:"align-content"};function x(t,e,a){var n=g[t];if(null!=a){if(e){var i=e.replace(t,"");n+="-".concat(i)}return n+="-".concat(a),n.toLowerCase()}}var y=new Map;e["a"]=s["a"].extend({name:"v-row",functional:!0,props:Object(i["a"])(Object(i["a"])(Object(i["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:u}},h),{},{justify:{type:String,default:null,validator:m}},v),{},{alignContent:{type:String,default:null,validator:f}},b),render:function(t,e){var a=e.props,i=e.data,s=e.children,r="";for(var l in a)r+=String(a[l]);var c=y.get(r);return c||function(){var t,e;for(e in c=[],p)p[e].forEach((function(t){var n=a[t],i=x(e,t,n);i&&c.push(i)}));c.push((t={"no-gutters":a.noGutters,"row--dense":a.dense},Object(n["a"])(t,"align-".concat(a.align),a.align),Object(n["a"])(t,"justify-".concat(a.justify),a.justify),Object(n["a"])(t,"align-content-".concat(a.alignContent),a.alignContent),t)),y.set(r,c)}(),t(a.tag,Object(o["a"])(i,{staticClass:"row",class:c}),s)}})},"169a":function(t,e,a){"use strict";var n=a("5530"),i=a("2909"),s=a("ade3"),o=(a("a9e3"),a("498a"),a("caad"),a("2532"),a("7db0"),a("368e"),a("480e")),r=a("4ad4"),l=a("b848"),c=a("75eb"),d=a("e707"),u=a("e4d3"),h=a("21be"),m=a("f2e7"),v=a("a293"),f=a("58df"),b=a("d9bd"),p=a("80d2"),g=Object(f["a"])(r["a"],l["a"],c["a"],d["a"],u["a"],h["a"],m["a"]);e["a"]=g.extend({name:"v-dialog",directives:{ClickOutside:v["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var t;return t={},Object(s["a"])(t,"v-dialog ".concat(this.contentClass).trim(),!0),Object(s["a"])(t,"v-dialog--active",this.isActive),Object(s["a"])(t,"v-dialog--persistent",this.persistent),Object(s["a"])(t,"v-dialog--fullscreen",this.fullscreen),Object(s["a"])(t,"v-dialog--scrollable",this.scrollable),Object(s["a"])(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(b["e"])("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):d["a"].options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$nextTick((function(){t.previousActiveElement=document.activeElement,t.$refs.content.focus(),t.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===p["y"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var a=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=Object(i["a"])(a).find((function(t){return!t.hasAttribute("disabled")}));n&&n.focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(o["a"],{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:Object(n["a"])({role:"document",tabindex:t.isActive?0:void 0},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent:function(){var t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style=Object(n["a"])(Object(n["a"])({},t.style),{},{maxWidth:"none"===this.maxWidth?void 0:Object(p["g"])(this.maxWidth),width:"auto"===this.width?void 0:Object(p["g"])(this.width)})),this.$createElement("div",t,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"368e":function(t,e,a){},8392:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("span",t._g(t._b({attrs:{id:t.text},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.copyToClipboard(e)}}},"span",i,!1),n),[t._v(" "+t._s(t.text)+" ")])]}}])},[a("span",[t._v(t._s(t.copyStatus?"Telah disalin":"Salin"))])])},i=[],s={props:{text:{type:String,default:""}},data:function(){return{copyStatus:!1}},methods:{copyToClipboard:function(){var t=this,e=document.createRange();e.selectNode(document.getElementById(this.text)),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),this.copyStatus=!0,window.getSelection().removeAllRanges(),this.$store.dispatch("layout/alertFire",{type:"success",message:"Teks berhasil disalin!"}),setTimeout((function(){t.copyStatus=!1}),1e3)}}},o=s,r=a("2877"),l=a("6544"),c=a.n(l),d=a("3a2f"),u=Object(r["a"])(o,n,i,!1,null,null,null);e["a"]=u.exports;c()(u,{VTooltip:d["a"]})}}]);