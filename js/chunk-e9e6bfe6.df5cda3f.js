(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9e6bfe6"],{"0fd9":function(e,t,n){"use strict";var i=n("ade3"),a=n("5530"),o=(n("13d5"),n("caad"),n("2532"),n("99af"),n("b64b"),n("5319"),n("ac1f"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("4b85"),n("2b0e")),s=n("d9f7"),r=n("80d2"),d=["sm","md","lg","xl"],l=["start","end","center"];function c(e,t){return d.reduce((function(n,i){return n[e+Object(r["G"])(i)]=t(),n}),{})}var u=function(e){return[].concat(l,["baseline","stretch"]).includes(e)},h=c("align",(function(){return{type:String,default:null,validator:u}})),v=function(e){return[].concat(l,["space-between","space-around"]).includes(e)},f=c("justify",(function(){return{type:String,default:null,validator:v}})),m=function(e){return[].concat(l,["space-between","space-around","stretch"]).includes(e)},g=c("alignContent",(function(){return{type:String,default:null,validator:m}})),p={align:Object.keys(h),justify:Object.keys(f),alignContent:Object.keys(g)},b={align:"align",justify:"justify",alignContent:"align-content"};function x(e,t,n){var i=b[e];if(null!=n){if(t){var a=t.replace(e,"");i+="-".concat(a)}return i+="-".concat(n),i.toLowerCase()}}var k=new Map;t["a"]=o["a"].extend({name:"v-row",functional:!0,props:Object(a["a"])(Object(a["a"])(Object(a["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:u}},h),{},{justify:{type:String,default:null,validator:v}},f),{},{alignContent:{type:String,default:null,validator:m}},g),render:function(e,t){var n=t.props,a=t.data,o=t.children,r="";for(var d in n)r+=String(n[d]);var l=k.get(r);return l||function(){var e,t;for(t in l=[],p)p[t].forEach((function(e){var i=n[e],a=x(t,e,i);a&&l.push(a)}));l.push((e={"no-gutters":n.noGutters,"row--dense":n.dense},Object(i["a"])(e,"align-".concat(n.align),n.align),Object(i["a"])(e,"justify-".concat(n.justify),n.justify),Object(i["a"])(e,"align-content-".concat(n.alignContent),n.alignContent),e)),k.set(r,l)}(),e(n.tag,Object(s["a"])(a,{staticClass:"row",class:l}),o)}})},"169a":function(e,t,n){"use strict";var i=n("5530"),a=n("2909"),o=n("ade3"),s=(n("a9e3"),n("498a"),n("caad"),n("2532"),n("7db0"),n("368e"),n("480e")),r=n("4ad4"),d=n("b848"),l=n("75eb"),c=n("e707"),u=n("e4d3"),h=n("21be"),v=n("f2e7"),f=n("a293"),m=n("58df"),g=n("d9bd"),p=n("80d2"),b=Object(m["a"])(r["a"],d["a"],l["a"],c["a"],u["a"],h["a"],v["a"]);t["a"]=b.extend({name:"v-dialog",directives:{ClickOutside:f["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var e;return e={},Object(o["a"])(e,"v-dialog ".concat(this.contentClass).trim(),!0),Object(o["a"])(e,"v-dialog--active",this.isActive),Object(o["a"])(e,"v-dialog--persistent",this.persistent),Object(o["a"])(e,"v-dialog--fullscreen",this.fullscreen),Object(o["a"])(e,"v-dialog--scrollable",this.scrollable),Object(o["a"])(e,"v-dialog--animated",this.animate),e},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(e){var t;e?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(t=this.previousActiveElement)||t.focus())},fullscreen:function(e){this.isActive&&(e?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(g["e"])("full-width",this)},beforeMount:function(){var e=this;this.$nextTick((function(){e.isBooted=e.isActive,e.isActive&&e.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var e=this;this.animate=!1,this.$nextTick((function(){e.animate=!0,window.clearTimeout(e.animateTimeout),e.animateTimeout=window.setTimeout((function(){return e.animate=!1}),150)}))},closeConditional:function(e){var t=e.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(t)||this.overlay&&t&&!this.overlay.$el.contains(t))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):c["a"].options.methods.hideScroll.call(this)},show:function(){var e=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){e.$nextTick((function(){e.previousActiveElement=document.activeElement,e.$refs.content.focus(),e.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(e){this.$emit("click:outside",e),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(e){if(e.keyCode===p["y"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var t=this.getActivator();this.$nextTick((function(){return t&&t.focus()}))}this.$emit("keydown",e)},onFocusin:function(e){if(e&&this.retainFocus){var t=e.target;if(t&&![document,this.$refs.content].includes(t)&&!this.$refs.content.contains(t)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(e){return e.contains(t)}))){var n=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=Object(a["a"])(n).find((function(e){return!e.hasAttribute("disabled")}));i&&i.focus()}}},genContent:function(){var e=this;return this.showLazyContent((function(){return[e.$createElement(s["a"],{props:{root:!0,light:e.light,dark:e.dark}},[e.$createElement("div",{class:e.contentClasses,attrs:Object(i["a"])({role:"document",tabindex:e.isActive?0:void 0},e.getScopeIdAttrs()),on:{keydown:e.onKeydown},style:{zIndex:e.activeZIndex},ref:"content"},[e.genTransition()])])]}))},genTransition:function(){var e=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[e]):e},genInnerContent:function(){var e={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(e.style=Object(i["a"])(Object(i["a"])({},e.style),{},{maxWidth:"none"===this.maxWidth?void 0:Object(p["g"])(this.maxWidth),width:"auto"===this.width?void 0:Object(p["g"])(this.width)})),this.$createElement("div",e,this.getContentSlot())}},render:function(e){return e("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"368e":function(e,t,n){},"8b83":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column flex-grow-1"},[n("router-view"),this.$route.params.id?e._e():n("div",{staticClass:"col-xl-4 col-12",style:e.isMobile?"padding: 0px!important;":""},[n("div",{staticClass:"d-flex align-center py-3"},[n("div",{staticClass:"display-1"},[e._v(" Node ")]),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),n("v-card-text",[n("v-container",[n("v-form",{attrs:{disabled:e.loadState}},[n("v-row",[n("v-text-field",{attrs:{outlined:"","error-messages":e.nameErrors,label:"Sensor name"},on:{input:e.$v.editedItem.name_node.$touch},model:{value:e.editedItem.name_node,callback:function(t){e.$set(e.editedItem,"name_node",t)},expression:"editedItem.name_node"}})],1),n("v-row",[n("v-text-field",{attrs:{outlined:"","error-messages":e.batasErrors,label:"Posisi X"},on:{input:e.$v.editedItem.lat.$touch},model:{value:e.editedItem.lat,callback:function(t){e.$set(e.editedItem,"lat",t)},expression:"editedItem.lat"}})],1),n("v-row",[n("v-text-field",{attrs:{outlined:"","error-messages":e.batasErrors,label:"Posisi Y"},on:{input:e.$v.editedItem.lng.$touch},model:{value:e.editedItem.lng,callback:function(t){e.$set(e.editedItem,"lng",t)},expression:"editedItem.lng"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:e.loadState},on:{click:function(t){return e.close("editNew")}}},[e._v(" Batalkan ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:e.loadState},on:{click:e.save}},[e._v(" Simpan ")])],1)],1)],1)],1),n("v-data-table",{staticClass:"elevation-1 rounded-xl",attrs:{headers:e.headers,items:e.nodes,search:e.search,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{rounded:"xl",flat:""}},[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Cari ..","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-spacer"),n("v-btn",{attrs:{icon:"",depressed:""},on:{click:e.initialize}},[n("v-icon",[e._v("mdi-reload")])],1),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(" Ingin menghapus data ini? ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:e.loadState},on:{click:function(t){return e.close("delete")}}},[e._v(" Batalkan ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:e.loadState},on:{click:e.deleteItemConfirm}},[e._v(" OK ")]),n("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.id",fn:function(t){var i=t.item,a=t.index;return[n("v-tooltip",{attrs:{right:"","close-delay":"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,s=t.attrs;return[n("span",e._g(e._b({on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.copy(i.id)}}},"span",s,!1),o),[e._v(e._s(a+1))])]}}],null,!0)},[n("span",{attrs:{id:i.id}},[e._v(e._s(i.id))])])]}},{key:"item.last_reads",fn:function(t){var n=t.item;return[e._v(" "+e._s(""+n.last_reads.length)+" ")]}},{key:"item.konektivitas",fn:function(t){var i=t.item;return[n("v-chip",{attrs:{color:i.konektivitas?"green":"red",dark:""}},[e._v(" "+e._s(i.konektivitas?"connected":"disconnected")+" ")])]}},"admin"===e.user.role?{key:"item.actions",fn:function(t){var i=t.item;return[n("v-btn",{attrs:{icon:"",depressed:""}},[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.editItem(i,"editNew")}}},[e._v(" mdi-pencil ")])],1),n("v-btn",{attrs:{icon:"",depressed:""}},[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.editItem(i,"delete")}}},[e._v(" mdi-delete ")])],1)]}}:null,{key:"no-data",fn:function(){return[e.loadState?n("Loader"):n("no-data",{attrs:{"reload-callback":e.initialize}})]},proxy:!0}],null,!0)})],1)],1)},a=[],o=n("1da1"),s=n("5530"),r=(n("96cf"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("d3b7"),n("c740"),n("a434"),n("2f62")),d=n("b5ae"),l=n("7d70"),c=n("1419"),u={components:{Loader:l["a"],NoData:c["a"]},data:function(){return{search:"",dialog:!1,dialogDelete:!1,headers:[{text:"No.",value:"id"},{text:"Node",align:"start",sortable:!1,value:"name_node"},{text:"Latitude",value:"lat"},{text:"Longitude",value:"lng"},{text:"Jumlah Sensor",value:"last_reads"},{text:"Konektivitas",value:"konektivitas"},{text:"",value:"actions",sortable:!1}],nodes:[],editedIndex:-1,editedItem:{name_node:"",lat:0,lng:0},defaultItem:{name_node:"",lat:0,lng:0}}},validations:{editedItem:{name_node:{required:d["required"]},lat:{required:d["required"],minLength:Object(d["minLength"])(0),maxValue:Object(d["maxValue"])(9999)},lng:{required:d["required"],minLength:Object(d["minLength"])(0),maxValue:Object(d["maxValue"])(9999)}}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(r["d"])("layout",["isMobile","loadState"])),Object(r["d"])("auth",["user"])),{},{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},nameErrors:function(){var e=[];return this.$v.editedItem.name_node.$dirty?(!this.$v.editedItem.name_node.required&&e.push("nama node dibutuhkan!"),e):e},batasErrors:function(){var e=[];return this.$v.editedItem.lat.$dirty&&this.$v.editedItem.lng.$dirty?(this.$v.editedItem.lat.required&&this.$v.editedItem.lng.required||e.push("koordinat dibutuhkan!"),this.$v.editedItem.lat.minLength&&this.$v.editedItem.lng.minLength||e.push("koordinat tidak boleh kosong!"),this.$v.editedItem.lat.maxValue&&this.$v.editedItem.lng.maxValue||e.push("Nilai koordinat tidak bisa lebih dari 9999!"),e):e}}),mqtt:{"events/UpdateNode":function(e){var t=new TextDecoder("utf-8"),n=new Uint8Array(e),i=JSON.parse(t.decode(n)),a=this.nodes.findIndex((function(e){return e.id===i.id}));-1===a?this.nodes.push(i):this.nodes.splice(a,1,i)}},watch:{dialog:function(e){e||this.close("editNew")},dialogDelete:function(e){e||this.close()}},created:function(){this.initialize()},mounted:function(){this.realtimeEventListener()},methods:{initialize:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nodes=[],e.loadstate(!0),t.prev=2,t.next=5,e.axios.get("node");case 5:n=t.sent,i=n.data,e.nodes=i.data.nodes,console.log("data node",e.nodes),e.loadstate(!1),t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](2),e.loadstate(!1),console.log("error store data",t.t0),e.alert("Terjadi kesalahan pada server!","error");case 17:case"end":return t.stop()}}),t,null,[[2,12]])})))()},editItem:function(e,t){this.editedIndex=this.nodes.indexOf(e),this.editedItem=Object.assign({},e),"editNew"===t?this.dialog=!0:this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;this.loadstate(!0),this.axios.delete("node/".concat(this.editedItem.id)).then((function(t){e.alert("Berhasil menghapus node!","success"),console.log("delete item",t),e.nodes.splice(e.editedIndex,1),e.loadstate(!1),e.close()})).catch((function(t){e.loadstate(!1),console.log("error delete data",t),e.alert("Terjadi kesalahan pada server!","error")}))},close:function(e){var t=this;"editNew"===e?this.dialog=!1:this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1,t.$v.$reset()}))},save:function(){var e=this;this.$v.editedItem.$invalid?this.alert("Semua kolom harus diisi!","error"):(console.log("simpan",this.editedItem),this.loadstate(!0),this.editedIndex>-1?this.axios.put("node/".concat(this.editedItem.id),this.editedItem).then((function(t){Object.assign(e.nodes[e.editedIndex],t.data.data),e.loadstate(!1),e.close("editNew")})).catch((function(t){console.log("error put data",t),e.alert("Terjadi kesalahan pada server!","error"),e.loadstate(!1)})):this.axios.post("node",this.editedItem).then((function(t){e.nodes.push(t.data.data),e.loadstate(!1),e.close("editNew")})).catch((function(t){console.log("error store data",t),e.alert("Terjadi kesalahan pada server!","error"),e.loadstate(!1)})))},copy:function(e){var t=document.createRange();console.log("range",t),t.selectNode(document.getElementById(e)),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.alert("Teks berhasil disalin!","success")},alert:function(e,t){this.$store.dispatch("layout/alertFire",{type:t,message:e})},loadstate:function(e){this.$store.commit("layout/setLoadstate",e)},realtimeEventListener:function(){this.$mqtt.subscribe("events/UpdateNode")}}},h=u,v=n("2877"),f=n("6544"),m=n.n(f),g=n("8336"),p=n("b0af"),b=n("99d9"),x=n("cc20"),k=n("a523"),y=n("8fea"),w=n("169a"),I=n("4bd4"),O=n("132d"),$=n("0fd9"),j=n("2fa4"),C=n("8654"),_=n("71d9"),S=n("3a2f"),A=Object(v["a"])(h,i,a,!1,null,null,null);t["default"]=A.exports;m()(A,{VBtn:g["a"],VCard:p["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VChip:x["a"],VContainer:k["a"],VDataTable:y["a"],VDialog:w["a"],VForm:I["a"],VIcon:O["a"],VRow:$["a"],VSpacer:j["a"],VTextField:C["a"],VToolbar:_["a"],VTooltip:S["a"]})}}]);